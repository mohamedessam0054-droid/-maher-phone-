<!DOCTYPE html>
<html>
<head><title>المنتجات</title></head>
<body>
<h1>المتجر</h1>
<div id="products-list"></div>

<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>
<script src="cart.js"></script> <!-- اربطه هنا -->

<script>
const firebaseConfig = {apiKey:"AIzaSyBt90XB3t9_MLH8-73wcQpE7fm65Le06FE",authDomain:"maher-phone.firebaseapp.com",projectId:"maher-phone",storageBucket:"maher-phone.firebasestorage.app",messagingSenderId:"759903479842",appId:"1:759903479842:web:25c32cd6034b413dc4027b",measurementId:"G-YV7TS3LDDW"};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const list=document.getElementById('products-list');

db.collection('products').onSnapshot(snapshot=>{
  list.innerHTML='';
  snapshot.forEach(doc=>{
    const data=doc.data();
    const el=document.createElement('div');
    el.innerHTML=`${data.name} - ${data.price} جنيه <button onclick='addToCart({id:"${doc.id}",name:"${data.name}",price:${data.price},qty:1})'>أضف للسلة</button>`;
    list.appendChild(el);
  });
});
</script>
</body>
</html>
